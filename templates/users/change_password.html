{% extends 'base.html' %}

{% block title %}Changer mon mot de passe  Colloc Manager{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="card shadow-lg rounded-4 mx-auto" style="max-width: 500px;">
        <div class="card-body p-5">

            <h2 class="fw-bold text-primary mb-4 text-center">ðŸ”‘ Changer mon mot de passe</h2>

            <form method="post" novalidate>
                {% csrf_token %}
                {{ form.non_field_errors }}

                <!-- Ancien mot de passe -->
                <div class="mb-4 position-relative">
                    <label for="id_old_password" class="form-label fw-semibold">Ancien mot de passe</label>
                    <input type="password" name="old_password" class="form-control rounded-pill py-2" id="id_old_password">
                    <div class="form-text text-danger">{{ form.old_password.errors }}</div>
                    <span class="toggle-password" onclick="togglePassword('id_old_password')">
                        <i class="bi bi-eye-fill"></i>
                    </span>
                </div>

                <!-- Nouveau mot de passe -->
                <div class="mb-4 position-relative">
                    <label for="id_new_password1" class="form-label fw-semibold">Nouveau mot de passe</label>
                    <input type="password" name="new_password1" class="form-control rounded-pill py-2" id="id_new_password1">
                    <div class="form-text text-danger">{{ form.new_password1.errors }}</div>
                    <span class="toggle-password" onclick="togglePassword('id_new_password1')">
                        <i class="bi bi-eye-fill"></i>
                    </span>
                </div>

                <!-- Confirmation mot de passe -->
                <div class="mb-4 position-relative">
                    <label for="id_new_password2" class="form-label fw-semibold">Confirmer le nouveau mot de passe</label>
                    <input type="password" name="new_password2" class="form-control rounded-pill py-2" id="id_new_password2">
                    <div class="form-text text-danger">{{ form.new_password2.errors }}</div>
                    <span class="toggle-password" onclick="togglePassword('id_new_password2')">
                        <i class="bi bi-eye-fill"></i>
                    </span>
                </div>

                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-gradient-primary fw-semibold py-2 rounded-pill">
                        <i class="bi bi-key-fill me-2"></i>Changer le mot de passe
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>

<style>
/* Gradient pour le bouton */
.btn-gradient-primary {
    background: linear-gradient(135deg, #007bff 0%, #0056d2 100%);
    color: white !important;
    border: none;
    transition: all 0.3s ease;
}
.btn-gradient-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
}

/* Card et inputs */
.card {
    background: #fff;
    transition: all 0.3s ease;
}
.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}
.form-control {
    border: 1px solid #ced4da;
    padding: 0.5rem 1rem;
    transition: all 0.2s ease;
    width: 100%;
}
.form-control:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
}

/* Toggle password */
.toggle-password {
    position: absolute;
    top: 38px;
    right: 15px;
    cursor: pointer;
    color: #6c757d;
}
.toggle-password:hover {
    color: #007bff;
}
</style>

<script>
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    if (input.type === "password") {
        input.type = "text";
    } else {
        input.type = "password";
    }
}
</script>
{% endblock %}
