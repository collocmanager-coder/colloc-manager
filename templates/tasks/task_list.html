{% extends 'base.html' %}
{% block title %}Tâches - Colloc Manager{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
        <h2 class="fw-bold text-primary">Liste des tâches de votre room</h2>
        
        <div class="d-flex gap-2 flex-wrap">
            {% if request.user.memberStatus == 'titulor' %}
                <a href="{% url 'task_create' %}" class="btn btn-gradient-primary rounded-pill px-4 py-2">
                    <i class="bi bi-plus-circle me-2"></i>Créer une tâche
                </a>
            {% endif %}
            <a href="{% url 'task_execution' %}" class="btn btn-outline-primary rounded-pill px-4 py-2">
                <i class="bi bi-list-check me-2"></i>Voir les exécutions
            </a>
            <a href="{% url 'my_taks' %}" class="btn btn-outline-success rounded-pill px-4 py-2">
                <i class="bi bi-person-check me-2"></i>Mes tâches
            </a>
        </div>
    </div>

    {% if tasks %}
        <div class="row g-4">
            {% for task in tasks %}
                <div class="col-md-6 col-lg-4">
                    <div class="card task-card shadow-sm rounded-4 position-relative p-3">
                        <h5 class="fw-bold">{{ task.taskName }}</h5>
                        <p class="text-muted mb-2">{{ task.taskDescription|truncatechars:50 }}</p>
                        <p class="text-muted mb-1">Chambre : {{ task.room.roomNumber }}</p>
                        <p class="text-muted mb-1">Durée : {{ task.durationDays }} jour(s)</p>

                        <div class="mt-3 d-flex justify-content-end gap-2">
                            <a href="{% url 'task_detail' task.pk %}" class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-eye-fill"></i>
                            </a>
                            <a href="{% url 'task_update' task.pk %}" class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <a href="{% url 'task_delete' task.pk %}" class="btn btn-sm btn-outline-danger">
                                <i class="bi bi-trash-fill"></i>
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center mt-5">Aucune tâche n’a été créée dans votre room.</div>
    {% endif %}
</div>

<style>
.task-card {
    background: #fff;
    transition: all 0.3s ease;
    padding: 20px;
}
.task-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.1);
}
.btn-outline-primary, .btn-outline-warning, .btn-outline-danger, .btn-outline-success, .btn-gradient-primary {
    transition: all 0.2s ease;
}
.btn-outline-primary:hover { background: #e3f2ff; }
.btn-outline-warning:hover { background: #fff3cd; }
.btn-outline-danger:hover { background: #f8d7da; }
.btn-outline-success:hover { background: #d4edda; }
.btn-gradient-primary {
    background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
    color: #fff;
}
.btn-gradient-primary:hover {
    filter: brightness(1.1);
}
</style>
{% endblock %}
